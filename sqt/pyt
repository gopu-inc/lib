#!/usr/bin/env python3
"""
Script pour crÃ©er un package sqt pour zarch
"""
import os
import tarfile
import json

# Fichiers Ã  inclure
files = [
    "sqt.h",
    "sqt.c", 
    "example.c",
    "Makefile",
    "README.md",
    "@za.json"
]

# VÃ©rifier que tous les fichiers existent
missing = []
for f in files:
    if not os.path.exists(f):
        missing.append(f)

if missing:
    print(f"âŒ Fichiers manquants: {missing}")
    exit(1)

# CrÃ©er l'archive
package_name = "sqt-1.0.0.zv"
print(f"ğŸ“¦ CrÃ©ation du package: {package_name}")

with tarfile.open(package_name, "w:gz") as tar:
    for file in files:
        print(f"  + {file}")
        tar.add(file)

# VÃ©rifier
print(f"\nâœ… Package crÃ©Ã©: {package_name}")
print(f"ğŸ“¦ Taille: {os.path.getsize(package_name)} octets")

# Afficher le contenu
print("\nğŸ“ Contenu:")
with tarfile.open(package_name, "r:gz") as tar:
    for member in tar.getmembers():
        print(f"  â€¢ {member.name}")